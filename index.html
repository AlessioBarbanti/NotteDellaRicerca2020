<html>
<meta charset="UTF-16">

<head>
    <title> NotteDellaRicerca2020 </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <link rel="stylesheet" href="index.css" />
    <!-- TODO OBBLIGARE IL LANDSCAPE-->
</head>

<body>
    <video id="video" autoplay loop style="display:none">
        <source src="./video/1.mp4" type='video/mp4'>
    </video>

    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <div class="text-center" id="div3D"></div>
                </div>
                <div id="descriptionDiv" class="modal-body">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Error provident eligendi totam, labore,
                        corporis iusto molestiae vitae harum nulla laborum aut eius quaerat aperiam? Inventore quasi
                        pariatur velit ipsam ab! Lorem ipsum dolor sit amet consectetur adipisicing elit. Sint in rerum
                        nihil quo. Atque debitis vitae maxime? Ad, necessitatibus neque perspiciatis numquam quibusdam
                        nesciunt aperiam reiciendis. Laudantium asperiores rerum cum.
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Impedit eos exercitationem atque
                        eligendi ipsam maxime vel
                        eveniet veniam, mollitia, modi qui? Aut, maxime molestiae commodi quia harum nostrum
                        reprehenderit? Quia! Lorem ipsum
                        dolor sit amet consectetur adipisicing elit. Reprehenderit, qui provident nemo ducimus eius
                        incidunt facilis neque illum
                        voluptate eligendi esse, sit dignissimos dolorem. At laudantium tempore dolore? Beatae,
                        repellendus!</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
                </div>
            </div>

        </div>
    </div>

    <div id="panorama">
        <div id="controls">
            <button id="ciao" type="button" class="btn btn-lg btn-danger ctrl" data-toggle="popover" title="Inventario"
                data-placement="top" data-content="Fino ad ora hai raccolto 0/23 SDGs">Inventario</button>
        </div>
    </div>



    <script src="js/three.js"></script>


    <script type="module">

        //********************************************Variables three.js*************************************************

        import { GLTFLoader } from './node_modules/three/examples/jsm/loaders/GLTFLoader.js';
        import { OrbitControls } from './node_modules/three/examples/jsm/controls/OrbitControls.js';


        var axisHelper = new THREE.AxesHelper(100);
        var model;
        var wave;
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 500);
        var loader = new GLTFLoader();
        var mixer;
        var fileAnimations;
        var clock = new THREE.Clock();
        var renderer = new THREE.WebGLRenderer({ alpha: true });
        var rendereDivDimension = window.innerHeight / 5;
        renderer.setSize(rendereDivDimension, rendereDivDimension);
        var i = 0;

        //***************************************************************PANNELLUM*************************************************************//


        var viewer = pannellum.viewer('panorama', {
            "hotSpotDebug": true,
            "autoLoad": true,
            "default": {
                "firstScene": "Aula3",// "Esterno1",
                "sceneFadeDuration": 3000
            },

            "scenes": {


                "Esterno1": {
                    "title": "Esterno1",
                    "pitch": 0,
                    "yaw": 0,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Esterno1.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },




                "IngressoCampus": {
                    "title": "IngressoCampus",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Esterno2.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },
                "Aula1": {
                    "title": "Aula1",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Aula1.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },
                "Aula2": {
                    "title": "Aula2",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Aula2.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                    ]
                },
                "Aula3": {
                    "title": "Aula3",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Aula3.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },
                "Aula4": {
                    "title": "Aula4",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Aula4.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },

                    ]
                },

                "Aula5": {
                    "title": "Aula5",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Aula5.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },

                "Balcone": {
                    "title": "Balcone",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Balcone.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },

                "Bar": {
                    "title": "Bar",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Bar.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },

                "Biblioteca": {
                    "title": "Biblioteca",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Biblioteca.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },

                "Corridoio1": {
                    "title": "Corridoio1",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Corridoio1.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },


                "Corridoio2": {
                    "title": "Corridoio2",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Corridoio2.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },


                "Corridoio3": {
                    "title": "Corridoio3",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Corridoio3.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },


                "Corridoio4": {
                    "title": "Corridoio4",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Corridoio4.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                    ]
                },


                "Corte1": {
                    "title": "Corte1",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Corte1.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                    ]
                },

                "Corte2": {
                    "title": "Corte2",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Corte2.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },

                "Disi": {
                    "title": "Disi",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Disi.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },



                "Esterno2": {
                    "title": "Esterno2",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Esterno2.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },


                "Hall1": {
                    "title": "Hall1",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Hall1.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },


                "Hall2": {
                    "title": "Hall2",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Hall2.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },

                "Laboratorio": {
                    "title": "Laboratorio",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/Laboratorio.jpg",
                    "hotSpots": [

                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        },
                        {
                            "pitch": -14.50,
                            "yaw": -147.95,
                            "cssClass": "currentGifDiv",
                            "id": "1",
                            "clickHandlerFunc": showModal, //onclick function
                            "clickHandlerArgs": "1",


                        }
                    ]
                },

                "AulaMagna": {
                    "title": "Aula Magna",
                    "hfov": 110,
                    "yaw": 5,
                    "type": "equirectangular",
                    "panorama": "img/rooms/AulaMagna.jpg",
                    "hotSpots": [
                        {
                            "pitch": -12,
                            "yaw": -141.57,
                            "type": "scene",
                            "text": "corte1",
                            "sceneId": "Corte1",
                            "targetYaw": 107,
                            "targetPitch": 4
                        },
                        {
                            "pitch": -1.40,
                            "yaw": -170.94,
                            "type": "info",
                            "text": "Questa Ã¨ una bella lavagna"
                        }
                    ]
                }
            }
        });


        console.log(viewer.getConfig());
        $(document).ready(function () {
            $('[data-toggle="popover"]').popover();
        });



        //Gestione punti
        var numeroRitrovamenti = 0;

        function showModal(args, i) {
            var tempI = i;
            $("#myModal").modal();
            addPoint(tempI);
        }


        function addPoint(i) {

            numeroRitrovamenti++;
            document.getElementById("ciao").setAttribute('data-content', "Attualmente hai trovato " + numeroRitrovamenti + "/17 SDGs!");

            viewer.removeHotSpot("1", viewer.getScene());

            if (viewer.getScene() == "Esterno1") {
                viewer.addHotSpot(
                    {

                        "pitch": 0,
                        "yaw": 20,
                        "type": "scene",
                        "text": "Esterno2",
                        "sceneId": "Esterno2"
                    })
            } else if (viewer.getScene() == "Esterno2") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Aula1",
                        "sceneId": "Aula1"
                    })
            } else if (viewer.getScene() == "Aula1") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Aula2",
                        "sceneId": "Aula2"
                    })
            } else if (viewer.getScene() == "Aula2") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Aula3",
                        "sceneId": "Aula3"

                    })
            } else if (viewer.getScene() == "Aula3") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Aula4",
                        "sceneId": "Aula4"
                    })
            } else if (viewer.getScene() == "Aula4") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Aula5",
                        "sceneId": "Aula5"
                    })
            } else if (viewer.getScene() == "Aula5") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Balcone",
                        "sceneId": "Balcone"
                    })
            } else if (viewer.getScene() == "Balcone") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Bar",
                        "sceneId": "Bar"
                    })
            } else if (viewer.getScene() == "Bar") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Biblioteca",
                        "sceneId": "Biblioteca"
                    })
            } else if (viewer.getScene() == "Biblioteca") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Corridoio1",
                        "sceneId": "Corridoio1"
                    })
            } else if (viewer.getScene() == "Corridoio1") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Corridoio2",
                        "sceneId": "Corridoio2"
                    })
            } else if (viewer.getScene() == "Corridoio2") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Corridoio3",
                        "sceneId": "Corridoio3"
                    })
            } else if (viewer.getScene() == "Corridoio3") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Corridoio4",
                        "sceneId": "Corridoio4"
                    })
            } else if (viewer.getScene() == "Corridoio4") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Corte1",
                        "sceneId": "Corte1"
                    })
            } else if (viewer.getScene() == "Corte1") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Corte2",
                        "sceneId": "Corte2"
                    })
            } else if (viewer.getScene() == "Corte2") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Disi",
                        "sceneId": "Disi"
                    })
            } else if (viewer.getScene() == "Disi") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Esterno2",
                        "sceneId": "Esterno2"
                    })
            } else if (viewer.getScene() == "Disi") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Esterno2",
                        "sceneId": "Esterno2"
                    })
            } else if (viewer.getScene() == "Esterno2") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Hall1",
                        "sceneId": "Hall1"
                    })
            } else if (viewer.getScene() == "Hall1") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Hall2",
                        "sceneId": "Hall2"
                    })
            } else if (viewer.getScene() == "Hall2") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "Laboratorio",
                        "sceneId": "Laboratorio"
                    })
            } else if (viewer.getScene() == "Laboratorio") {
                viewer.addHotSpot(
                    {
                        "pitch": -1.23,
                        "yaw": 150,
                        "type": "scene",
                        "text": "AulaMagna",
                        "sceneId": "AulaMagna"
                    });

                // if (numeroRitrovamenti == 2) {
                //     alert("Hai trovato tutti gli SDG!")
                // }

            }

        }



        function sceneLoadListener() {
            var hotspotList = document.getElementsByClassName("currentGifDiv");
            //Div resize on zoom not possible or really difficult :(
            //https://github.com/mpetroff/pannellum/issues/665
            hotspotList[0].style.width = (document.getElementById('panorama').clientHeight / 10);
            hotspotList[0].style.height = hotspotList[0].style.width;


            if (viewer.getScene() == "Aula1") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/1.gif')";
                loader.load('3Dimg/1_goal.glb', function (gltf) {
                    model = gltf.scene;
                    model.translateX(-2.35);
                    model.translateY(-2);
                    fileAnimations = gltf.animations;
                    mixer = new THREE.AnimationMixer(model);
                    for (i = 0; i < fileAnimations.length; i++) {
                        mixer.clipAction(gltf.animations[i]).play();
                    }
                    scene.add(gltf.scene);
                    scene.add(axisHelper);
                    camera.position.z = 10; //ok
                    camera.position.y = 0;
                    camera.position.x = 0;

                }, undefined, function (error) {

                    console.error(error);

                });
                document.getElementById("div3D").appendChild(renderer.domElement);

            }
            if (viewer.getScene() == "Aula2") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/2.gif')";
                loader.load('3Dimg/2_goal.glb', function (gltf) {
                    model = gltf.scene;
                    model.translateX(-2.35);
                    model.translateY(-2);
                    fileAnimations = gltf.animations;
                    mixer = new THREE.AnimationMixer(model);
                    for (i = 0; i < fileAnimations.length; i++) {
                        mixer.clipAction(gltf.animations[i]).play();
                    }
                    scene.add(gltf.scene);
                    scene.add(axisHelper);
                    camera.position.z = 10; //ok
                    camera.position.y = 0;
                    camera.position.x = 0;

                }, undefined, function (error) {

                    console.error(error);

                });
                document.getElementById("div3D").appendChild(renderer.domElement);

            }
            if (viewer.getScene() == "Aula3") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/3.gif')";
                document.getElementById("descriptionDiv").innerHTML = "**Testo Modificato con descrizione adatta**";
                /*
                loader.load('3Dimg/3_goal.glb', function (gltf) {
                    
                    model = gltf.scene;
                    model.translateX(-2.35);
                    model.translateY(-2);
                    video = document.getElementById( 'video' );
                    videoTexture = new THREE.VideoTexture(video);
                    model.
                    fileAnimations = gltf.animations;
                    mixer = new THREE.AnimationMixer(model);
                    for (i = 0; i < fileAnimations.length; i++) {
                        mixer.clipAction(gltf.animations[i]).play();
                    }
                    scene.add(gltf.scene);
                    scene.add(axisHelper);
                    camera.position.z = 10; //ok
                    camera.position.y = 0;
                    camera.position.x = 0;

                }, undefined, function (error) {

                    console.error(error);

                });*/

                const geometry = new THREE.BoxBufferGeometry(1, 1, 1);
                const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
                const cube = new THREE.Mesh(geometry, material);
                scene.add(cube);
                document.getElementById("div3D").appendChild(renderer.domElement);

            }
            if (viewer.getScene() == "Aula4") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/4.gif')";
                document.getElementById("descriptionDiv").innerHTML = "**Testo Modificato con descrizione adatta**";
                loader.load('3Dimg/4_goal.glb', function (gltf) {
                    model = gltf.scene;
                    model.translateX(-2.35);
                    model.translateY(-2);
                    fileAnimations = gltf.animations;
                    mixer = new THREE.AnimationMixer(model);
                    for (i = 0; i < fileAnimations.length; i++) {
                        mixer.clipAction(gltf.animations[i]).play();
                    }
                    scene.add(gltf.scene);
                    scene.add(axisHelper);
                    camera.position.z = 10; //ok
                    camera.position.y = 0;
                    camera.position.x = 0;

                }, undefined, function (error) {

                    console.error(error);

                });
                document.getElementById("div3D").appendChild(renderer.domElement);

            }
            if (viewer.getScene() == "Aula5") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/5.gif')";
                document.getElementById("descriptionDiv").innerHTML = "**Testo Modificato con descrizione adatta**";
                loader.load('3Dimg/5_goal.glb', function (gltf) {
                    model = gltf.scene;
                    model.translateX(-2.35);
                    model.translateY(-2);
                    fileAnimations = gltf.animations;
                    mixer = new THREE.AnimationMixer(model);
                    for (i = 0; i < fileAnimations.length; i++) {
                        mixer.clipAction(gltf.animations[i]).play();
                    }
                    scene.add(gltf.scene);
                    scene.add(axisHelper);
                    camera.position.z = 10; //ok
                    camera.position.y = 0;
                    camera.position.x = 0;

                }, undefined, function (error) {

                    console.error(error);

                });
                document.getElementById("div3D").appendChild(renderer.domElement);

            }
            if (viewer.getScene() == "AulaMagna") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/6.gif')";
                document.getElementById("descriptionDiv").innerHTML = "**Testo Modificato con descrizione adatta**";
                loader.load('3Dimg/6_goal.glb', function (gltf) {
                    model = gltf.scene;
                    model.translateX(-2.35);
                    model.translateY(-2);
                    fileAnimations = gltf.animations;
                    mixer = new THREE.AnimationMixer(model);
                    for (i = 0; i < fileAnimations.length; i++) {
                        mixer.clipAction(gltf.animations[i]).play();
                    }
                    scene.add(gltf.scene);
                    scene.add(axisHelper);
                    camera.position.z = 10; //ok
                    camera.position.y = 0;
                    camera.position.x = 0;

                }, undefined, function (error) {

                    console.error(error);

                });
                document.getElementById("div3D").appendChild(renderer.domElement);

            }
            if (viewer.getScene() == "Balcone") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/7.gif')";
                document.getElementById("descriptionDiv").innerHTML = "**Testo Modificato con descrizione adatta**";
                loader.load('3Dimg/7_goal.glb', function (gltf) {
                    model = gltf.scene;
                    model.translateX(-2.35);
                    model.translateY(-2);
                    fileAnimations = gltf.animations;
                    mixer = new THREE.AnimationMixer(model);
                    for (i = 0; i < fileAnimations.length; i++) {
                        mixer.clipAction(gltf.animations[i]).play();
                    }
                    scene.add(gltf.scene);
                    scene.add(axisHelper);
                    camera.position.z = 10; //ok
                    camera.position.y = 0;
                    camera.position.x = 0;

                }, undefined, function (error) {

                    console.error(error);

                });
                document.getElementById("div3D").appendChild(renderer.domElement);

            }
            if (viewer.getScene() == "Bar") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/8.gif')";
            }
            if (viewer.getScene() == "Biblioteca") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/9.gif')";
            }
            if (viewer.getScene() == "Corridoio1") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/10.gif')";
            }
            if (viewer.getScene() == "Corridoio2") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/11.gif')";
            }
            if (viewer.getScene() == "Corridoio3") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/12.gif')";
            }
            if (viewer.getScene() == "Corridoio4") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/13.gif')";
            }
            if (viewer.getScene() == "Corte1") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/14.gif')";
            }
            if (viewer.getScene() == "Corte2") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/15.gif')";
            }
            if (viewer.getScene() == "Disi") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/16.gif')";
            }
            if (viewer.getScene() == "Esterno1") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/17.gif')";
            }
            if (viewer.getScene() == "Esterno2") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/17.gif')";
            }
            if (viewer.getScene() == "Hall1") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/17.gif')";
            }
            if (viewer.getScene() == "Hall2") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/17.gif')";
            }
            if (viewer.getScene() == "Laboratorio") {
                hotspotList[0].style.backgroundImage = "url('./img/SDGGif/17.gif')";
            }
        };



        function sceneLoadListener() {
            console.log("Load done");

        };
        viewer.on('scenechange', sceneChangeListener);
        viewer.on('load', sceneLoadListener);




        //****************************************************************THREE.JS*************************************************************












        const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 1.1);
        hemiLight.position.set(10, 20, 10);
        scene.add(hemiLight);

        const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
        dirLight.position.set(- 3, 10, - 10);
        scene.add(dirLight);
        const controls = new OrbitControls(camera, renderer.domElement);





        controls.update();

        function animate() {

            requestAnimationFrame(animate);
            if (mixer) {
                mixer.update(clock.getDelta());
            }

            controls.update();
            renderer.render(scene, camera);

        }
        animate();

    </script>

</body>

</html>